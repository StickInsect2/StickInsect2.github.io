<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.python中的继承和多态 | 秦双的博客</title>
    <meta name="description" content="ThreeDay Personal Website">
    <link rel="icon" href="/images/home.jpeg">
  <link rel="manifest" href="/images/home.jpeg">
  <link rel="apple-touch-icon" href="/images/home.jpeg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.39f6aafe.css" as="style"><link rel="preload" href="/assets/js/app.f89a45ef.js" as="script"><link rel="preload" href="/assets/js/14.22936df2.js" as="script"><link rel="prefetch" href="/assets/js/10.32059001.js"><link rel="prefetch" href="/assets/js/11.7984c98d.js"><link rel="prefetch" href="/assets/js/12.9ed222fb.js"><link rel="prefetch" href="/assets/js/13.9202593c.js"><link rel="prefetch" href="/assets/js/15.1c292487.js"><link rel="prefetch" href="/assets/js/16.b585eafa.js"><link rel="prefetch" href="/assets/js/17.b97ac1e0.js"><link rel="prefetch" href="/assets/js/18.e7974464.js"><link rel="prefetch" href="/assets/js/19.5e2912d2.js"><link rel="prefetch" href="/assets/js/2.acab570a.js"><link rel="prefetch" href="/assets/js/3.6aadd557.js"><link rel="prefetch" href="/assets/js/4.0e3bf148.js"><link rel="prefetch" href="/assets/js/5.3355cfb1.js"><link rel="prefetch" href="/assets/js/6.d0e6a115.js"><link rel="prefetch" href="/assets/js/7.aacc527e.js"><link rel="prefetch" href="/assets/js/8.2c019a91.js"><link rel="prefetch" href="/assets/js/9.4298c5b0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.39f6aafe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">秦双的博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">目录</a></div><div class="nav-item"><a href="/python/basic.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">python</a></div><div class="nav-item"><a href="/test/finance.html" class="nav-link">软件测试</a></div><div class="nav-item"><a href="/automation/apiAuto.html" class="nav-link">自动化</a></div><div class="nav-item"><a href="/others/gitHooks.html" class="nav-link">杂项</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">目录</a></div><div class="nav-item"><a href="/python/basic.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">python</a></div><div class="nav-item"><a href="/test/finance.html" class="nav-link">软件测试</a></div><div class="nav-item"><a href="/automation/apiAuto.html" class="nav-link">自动化</a></div><div class="nav-item"><a href="/others/gitHooks.html" class="nav-link">杂项</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">总览</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>python</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/python/basic.html" aria-current="page" class="active sidebar-link">python基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic.html#_1-python中的继承和多态" class="sidebar-link">1.python中的继承和多态</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_2-获取对象信息" class="sidebar-link">2.获取对象信息</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_3-python类的-str-和-repr-方法：" class="sidebar-link">3.python类的__str__和__repr__方法：</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_4-python类的-slots-方法，-len-方法" class="sidebar-link">4.Python类的__slots__方法，__len__方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic.html#_4-1-python类的-slots-方法" class="sidebar-link">4.1 Python类的__slots__方法</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_4-2-python类的-len-方法" class="sidebar-link">4.2 Python类的__len__方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/basic.html#_5-python类的-call-方法" class="sidebar-link">5.Python类的__call__方法</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_6-python模块" class="sidebar-link">6.python模块</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_7-python读写文件" class="sidebar-link">7.python读写文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic.html#_7-1-python打开文本文件" class="sidebar-link">7.1. Python打开文本文件</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_7-2-python读取文件内容" class="sidebar-link">7.2. Python读取文件内容</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_7-3-python把字符串写入文件" class="sidebar-link">7.3. Python把字符串写入文件</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_7-4-python往文件追加内容" class="sidebar-link">7.4. Python往文件追加内容</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_7-5-python正确关闭文件" class="sidebar-link">7.5. Python正确关闭文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/basic.html#_8-python网络编程" class="sidebar-link">8.python网络编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic.html#_8-1-python自带的http服务器" class="sidebar-link">8.1. python自带的HTTP服务器</a></li><li class="sidebar-sub-header"><a href="/python/basic.html#_8-2-python的requests库" class="sidebar-link">8.2. Python的requests库</a></li></ul></li><li class="sidebar-sub-header"><a href="/python/basic.html#_9-python函数式编程" class="sidebar-link">9.python函数式编程</a></li></ul></li><li><a href="/python/advance.html" class="sidebar-link">python进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/advance.html#_1-collections模块" class="sidebar-link">1.collections模块</a></li></ul></li><li><a href="/python/book.html" class="sidebar-link">python书籍</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>软件测试</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>自动化项目</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>杂项</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><ul><li><a href="#1python%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF%E5%92%8C%E5%A4%9A%E6%80%81">1.python中的继承和多态</a></li> <li><a href="#2%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E4%BF%A1%E6%81%AF">2.获取对象信息</a></li> <li><a href="#3python%E7%B1%BB%E7%9A%84__str__%E5%92%8C__repr__%E6%96%B9%E6%B3%95">3.python类的<code>__str__</code>和<code>__repr__</code>方法：</a></li> <li><a href="#4python%E7%B1%BB%E7%9A%84__slots__%E6%96%B9%E6%B3%95__len__%E6%96%B9%E6%B3%95">4.Python类的<code>__slots__</code>方法，<code>__len__方法</code></a> <ul><li><a href="#41-python%E7%B1%BB%E7%9A%84__slots__%E6%96%B9%E6%B3%95">4.1 Python类的<code>__slots__</code>方法</a></li> <li><a href="#42-python%E7%B1%BB%E7%9A%84__len__%E6%96%B9%E6%B3%95">4.2 Python类的<code>__len__</code>方法</a></li></ul></li> <li><a href="#5python%E7%B1%BB%E7%9A%84__call__%E6%96%B9%E6%B3%95">5.Python类的<code>__call__</code>方法</a></li> <li><a href="#6python%E6%A8%A1%E5%9D%97">6.python模块</a></li> <li><a href="#7python%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6">7.python读写文件</a> <ul><li><a href="#71-python%E6%89%93%E5%BC%80%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6">7.1. Python打开文本文件</a></li> <li><a href="#72-python%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9">7.2. Python读取文件内容</a></li> <li><a href="#73-python%E6%8A%8A%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6">7.3. Python把字符串写入文件</a></li> <li><a href="#74-python%E5%BE%80%E6%96%87%E4%BB%B6%E8%BF%BD%E5%8A%A0%E5%86%85%E5%AE%B9">7.4. Python往文件追加内容</a></li> <li><a href="#75-python%E6%AD%A3%E7%A1%AE%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6">7.5. Python正确关闭文件</a></li></ul></li> <li><a href="#8python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B">8.python网络编程</a> <ul><li><a href="#81-python%E8%87%AA%E5%B8%A6%E7%9A%84http%E6%9C%8D%E5%8A%A1%E5%99%A8">8.1. python自带的HTTP服务器</a></li> <li><a href="#82-python%E7%9A%84requests%E5%BA%93">8.2. Python的requests库</a></li></ul></li> <li><a href="#9python%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B">9.python函数式编程</a></li></ul> <h2 id="_1-python中的继承和多态"><a href="#_1-python中的继承和多态" class="header-anchor">#</a> 1.python中的继承和多态</h2> <ol><li>python中的继承:</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">,</span>course<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>Teacher<span class="token punctuation">,</span>self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span>gender<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>course <span class="token operator">=</span> course
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li><p>python中的多态：</p> <p>父类和子类中定义相同的实例方法，实例对象调用先寻找自身类上的方法，没有再沿着继承关系找</p></li> <li><p>python中的多重继承：</p> <p>除了从一个父类继承外，Python允许从多个父类继承，称为多重继承。多重继承和单继承没有特别大的差异，只是在括号内加入多个需要继承的类的名字即可。</p> <img src="https://img.mukewang.com/5f48a2020001015707580552.jpg" alt="img" style="zoom:25%;"></li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>B<span class="token punctuation">,</span> C<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>D<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
        <span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string">'init D...'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/images/py1.png" alt></p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>1，找到入度为0的点，只有一个D，把D拿出来，把D相关的边减掉
2，现在有两个入度为0的点(C1,C2),取最左原则，拿C1，减掉C1相关的边，这时候的排序是{D,C1}
3, 现在入度为0的点(C2),拿掉C2，减掉C2相关的边，这时候的排序是{D,C1,C2}
4,现在入度为0的点(A,B),取最左原则，拿掉A，减掉A相关的边，这时候的排序是{D,C1,C2,A}
5,现在入度为0的点只有B，拿掉B，减掉B相关的边，最后只剩下object
所以最后的排序是{D,C1,C2,A,B,object}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>多重继承的目的是从两种继承树中分别选择并继承出子类，以便组合功能使用。
举个例子，Python的网络服务器有TCPServer、UDPServer、UnixStreamServer、UnixDatagramServer，而服务器运行模式有 多进程ForkingMixin 和 多线程ThreadingMixin两种。
要创建多进程模式的 TCPServer：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyTCPServer</span><span class="token punctuation">(</span>TCPServer<span class="token punctuation">,</span> ForkingMixin<span class="token punctuation">)</span>
    <span class="token keyword">pass</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>要创建多线程模式的 UDPServer：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">MyUDPServer</span><span class="token punctuation">(</span>UDPServer<span class="token punctuation">,</span> ThreadingMixin<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果没有多重继承，要实现上述所有可能的组合需要 4x2=8 个子类。</p> <h2 id="_2-获取对象信息"><a href="#_2-获取对象信息" class="header-anchor">#</a> 2.获取对象信息</h2> <p>isinstance(实例对象，类名)</p> <p>type(变量/对象)</p> <p>dir(变量)    通过dir()方法，可以获取变量的所有属性：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>在dir列出的属性中，有很多是以下划线开头和结尾的，这些都是特殊的方法，称为内建方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> n <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'__abs__'</span><span class="token punctuation">,</span> <span class="token string">'__add__'</span><span class="token punctuation">,</span> <span class="token string">'__and__'</span><span class="token punctuation">,</span> <span class="token string">'__bool__'</span><span class="token punctuation">,</span> <span class="token string">'__ceil__'</span><span class="token punctuation">,</span> <span class="token string">'__class__'</span><span class="token punctuation">,</span> <span class="token string">'__delattr__'</span><span class="token punctuation">,</span> <span class="token string">'__dir__'</span><span class="token punctuation">,</span> <span class="token string">'__divmod__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span> <span class="token string">'__eq__'</span><span class="token punctuation">,</span> <span class="token string">'__float__'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s <span class="token operator">=</span> <span class="token string">'this is a string'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'__add__'</span><span class="token punctuation">,</span> <span class="token string">'__class__'</span><span class="token punctuation">,</span> <span class="token string">'__contains__'</span><span class="token punctuation">,</span> <span class="token string">'__delattr__'</span><span class="token punctuation">,</span> <span class="token string">'__dir__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span> <span class="token string">'__eq__'</span><span class="token punctuation">,</span> <span class="token string">'__format__'</span><span class="token punctuation">,</span> <span class="token string">'__ge__'</span><span class="token punctuation">,</span> <span class="token string">'__getattribute__'</span><span class="token punctuation">,</span> <span class="token string">'__getitem__'</span><span class="token punctuation">,</span> <span class="token string">'__getnewargs__'</span><span class="token punctuation">,</span> <span class="token string">'__gt__'</span><span class="token punctuation">,</span> <span class="token string">'__hash__'</span><span class="token punctuation">,</span> <span class="token string">'__init__'</span><span class="token punctuation">,</span> <span class="token string">'__init_subclass__'</span><span class="token punctuation">,</span> <span class="token string">'__iter__'</span><span class="token punctuation">,</span> <span class="token string">'__le__'</span><span class="token punctuation">,</span> <span class="token string">'__len__'</span><span class="token punctuation">,</span> <span class="token string">'__lt__'</span><span class="token punctuation">,</span> <span class="token string">'__mod__'</span><span class="token punctuation">,</span> <span class="token string">'__mul__'</span><span class="token punctuation">,</span> <span class="token string">'__ne__'</span><span class="token punctuation">,</span> <span class="token string">'__new__'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>对于自定义对象：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
    <span class="token keyword">def</span> <span class="token function">who</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'I am a Person, my name is {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Female'</span><span class="token punctuation">)</span>
<span class="token builtin">dir</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>

<span class="token punctuation">[</span><span class="token string">'__class__'</span><span class="token punctuation">,</span> <span class="token string">'__delattr__'</span><span class="token punctuation">,</span> <span class="token string">'__dict__'</span><span class="token punctuation">,</span> <span class="token string">'__dir__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span> <span class="token string">'__eq__'</span><span class="token punctuation">,</span> <span class="token string">'__format__'</span><span class="token punctuation">,</span> <span class="token string">'__ge__'</span><span class="token punctuation">,</span> <span class="token string">'__getattribute__'</span><span class="token punctuation">,</span> <span class="token string">'__gt__'</span><span class="token punctuation">,</span> <span class="token string">'__hash__'</span><span class="token punctuation">,</span> <span class="token string">'__init__'</span><span class="token punctuation">,</span> <span class="token string">'__init_subclass__'</span><span class="token punctuation">,</span> <span class="token string">'__le__'</span><span class="token punctuation">,</span> <span class="token string">'__lt__'</span><span class="token punctuation">,</span> <span class="token string">'__module__'</span><span class="token punctuation">,</span> <span class="token string">'__ne__'</span><span class="token punctuation">,</span> <span class="token string">'__new__'</span><span class="token punctuation">,</span> <span class="token string">'__reduce__'</span><span class="token punctuation">,</span> <span class="token string">'__reduce_ex__'</span><span class="token punctuation">,</span> <span class="token string">'__repr__'</span><span class="token punctuation">,</span> <span class="token string">'__setattr__'</span><span class="token punctuation">,</span> <span class="token string">'__sizeof__'</span><span class="token punctuation">,</span> <span class="token string">'__str__'</span><span class="token punctuation">,</span> <span class="token string">'__subclasshook__'</span><span class="token punctuation">,</span> <span class="token string">'__weakref__'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'who'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>对于实例变量，dir()返回所有实例属性，包括<code>__class__</code>这类有特殊意义的属性。注意到方法who也是p的一个属性。
dir()返回的属性是字符串列表，如果已知一个属性名称，要获取或者设置对象的属性，就需要用 getattr() 和 setattr( )函数了。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span> <span class="token comment"># 获取name属性</span>
<span class="token string">'Alice'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">setattr</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'Adam'</span><span class="token punctuation">)</span> <span class="token comment"># 设置新的name属性</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> s<span class="token punctuation">.</span>name
<span class="token string">'Adam'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">)</span> <span class="token comment"># 获取age属性，但是属性不存在，报错：</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AttributeError<span class="token punctuation">:</span> <span class="token string">'Person'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'age'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token comment"># 获取age属性，如果属性不存在，就返回默认值20：</span>
<span class="token number">20</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>希望除了name和gender外，可以提供任意额外的关键字参数，并绑定到实例，请修改 Person 的__init__()定义，完成该功能。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> <span class="token operator">**</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
        <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> args<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token builtin">setattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> k<span class="token punctuation">,</span> v<span class="token punctuation">)</span>

p <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Male'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">,</span>course <span class="token operator">=</span> <span class="token string">'python'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>course<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_3-python类的-str-和-repr-方法："><a href="#_3-python类的-str-和-repr-方法：" class="header-anchor">#</a> 3.python类的<code>__str__</code>和<code>__repr__</code>方法：</h2> <p>对于Python的内建对象，比如int、dict、list等，通过str()方法，可以把这些对象转换为字符串对象输出。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>num <span class="token operator">=</span> <span class="token number">12</span>
<span class="token builtin">str</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment"># ==&gt; '12'</span>
d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token builtin">str</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token comment"># ==&gt; '{1: 1, 2: 2}'</span>
l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token builtin">str</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token comment"># ==&gt; '[1, 2, 3, 4, 5]'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>对于自定义对象，通过str()方法，同样可以得到对象所对应的字符串结果，只不过结果会有些难理解。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

bob <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">str</span><span class="token punctuation">(</span>bob<span class="token punctuation">)</span> <span class="token comment"># ==&gt; '&lt;__main__.Person object at 0x7fc77b859c50&gt;'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>&lt;<strong>main</strong>.Person object at 0x7fc77b859c50&gt;这个结果其实是Animal的实例cat在内存中的地址，这是相当难以理解的，不过引发思考的是，通过str()打印的数据，是怎么来的呢？
这其实是对象的内建方法<code>__str()__</code>返回的。
通过dir()方法，我们可以把对象的所有方法打印出来。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">'__add__'</span><span class="token punctuation">,</span> <span class="token string">'__class__'</span><span class="token punctuation">,</span> <span class="token string">'__contains__'</span><span class="token punctuation">,</span> <span class="token string">'__delattr__'</span><span class="token punctuation">,</span> <span class="token string">'__delitem__'</span><span class="token punctuation">,</span> <span class="token string">'__dir__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">,</span> <span class="token string">'__eq__'</span><span class="token punctuation">,</span> <span class="token string">'__format__'</span><span class="token punctuation">,</span> <span class="token string">'__ge__'</span><span class="token punctuation">,</span> <span class="token string">'__getattribute__'</span><span class="token punctuation">,</span> <span class="token string">'__getitem__'</span><span class="token punctuation">,</span> <span class="token string">'__gt__'</span><span class="token punctuation">,</span> <span class="token string">'__hash__'</span><span class="token punctuation">,</span> <span class="token string">'__iadd__'</span><span class="token punctuation">,</span> <span class="token string">'__imul__'</span><span class="token punctuation">,</span> <span class="token string">'__init__'</span><span class="token punctuation">,</span> <span class="token string">'__init_subclass__'</span><span class="token punctuation">,</span> <span class="token string">'__iter__'</span><span class="token punctuation">,</span> <span class="token string">'__le__'</span><span class="token punctuation">,</span> <span class="token string">'__len__'</span><span class="token punctuation">,</span> <span class="token string">'__lt__'</span><span class="token punctuation">,</span> <span class="token string">'__mul__'</span><span class="token punctuation">,</span> <span class="token string">'__ne__'</span><span class="token punctuation">,</span> <span class="token string">'__new__'</span><span class="token punctuation">,</span> <span class="token string">'__reduce__'</span><span class="token punctuation">,</span> <span class="token string">'__reduce_ex__'</span><span class="token punctuation">,</span> <span class="token string">'__repr__'</span><span class="token punctuation">,</span> <span class="token string">'__reversed__'</span><span class="token punctuation">,</span> <span class="token string">'__rmul__'</span><span class="token punctuation">,</span> <span class="token string">'__setattr__'</span><span class="token punctuation">,</span> <span class="token string">'__setitem__'</span><span class="token punctuation">,</span> <span class="token string">'__sizeof__'</span><span class="token punctuation">,</span> <span class="token string">'__str__'</span><span class="token punctuation">,</span> <span class="token string">'__subclasshook__'</span><span class="token punctuation">,</span> <span class="token string">'append'</span><span class="token punctuation">,</span> <span class="token string">'clear'</span><span class="token punctuation">,</span> <span class="token string">'copy'</span><span class="token punctuation">,</span> <span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token string">'extend'</span><span class="token punctuation">,</span> <span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token string">'insert'</span><span class="token punctuation">,</span> <span class="token string">'pop'</span><span class="token punctuation">,</span> <span class="token string">'remove'</span><span class="token punctuation">,</span> <span class="token string">'reverse'</span><span class="token punctuation">,</span> <span class="token string">'sort'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看到，int、dict、list等的内建对象都实现了自己的<code>__str()__</code>方法，可以把相应的字符串返回，如果我们的类也想把容易理解的字符串输出的话，那么我们也需要实现类的<code>__str()__</code>方法。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'name: {}, gender: {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>

bob <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Male'</span><span class="token punctuation">)</span>
<span class="token builtin">str</span><span class="token punctuation">(</span>bob<span class="token punctuation">)</span> <span class="token comment"># ==&gt; 'name: Bob, gender: Male'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>但是，对于直接在终端输入变量bob，得到的依然是这样结果。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; bob
&lt;__main__.Person object at 0x7fc77b859cc0&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>而对于int、list等的对象，直接输入变量也可得到可读的结果。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> num <span class="token operator">=</span> <span class="token number">12</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">str</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
<span class="token string">'12'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> d
<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>__repr__和__str__的区别在于后者是被str()韩式所使用，或者是在print函数打印一个对象的时候被调用，它返回的字符串对终端用户更友好。</p> <p><strong><strong>str</strong>()函数似乎没有在自定义类Person中生效，这是为什么呢？</strong>
这是因为 Python 定义了<code>__str()__</code>和<code>__repr__</code>()两种方法，<code>__str()__</code>用于显示给用户，而<code>__repr__</code>()用于显示给开发人员，当使用str()时，实际调用的是<code>__str__</code>()方法，而直接输入变量，调用的是<code>__repr__</code>()方法。</p> <blockquote><p>如果只想实现这两个特殊方法中的一个，__repr__是更好的选择，因为如果一个对象没有__str__函数，而python又需要调用它的时候，解释器会用__repr__做替代。</p></blockquote> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'name: {}, gender: {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'name: {}, gender: {}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>gender<span class="token punctuation">)</span>

bob <span class="token operator">=</span> Person<span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Male'</span><span class="token punctuation">)</span>
<span class="token builtin">str</span><span class="token punctuation">(</span>bob<span class="token punctuation">)</span> <span class="token comment"># ==&gt; 'name: Bob, gender: Male'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> bob
<span class="token string">'name: Bob, gender: Male'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>??<code>__str__</code>是object对象的内置函数，而str()是python全局的一个内置函数，这两个不是一个函数在使用   str(a)   时等价于  a.<code>__str__</code>()   ，即str方法会去调用对象的内置函数<code>__str__</code>这里你可能会问，那为啥不写a.<code>__str__</code>()，而是写成str(a)。因为习惯规定双下划线的为私有级别，不建议直接调用，而且个人觉得写起来代码也不好看</p> <h2 id="_4-python类的-slots-方法，-len-方法"><a href="#_4-python类的-slots-方法，-len-方法" class="header-anchor">#</a> 4.Python类的<code>__slots__</code>方法，<code>__len__方法</code></h2> <h3 id="_4-1-python类的-slots-方法"><a href="#_4-1-python类的-slots-方法" class="header-anchor">#</a> 4.1 Python类的<code>__slots__</code>方法</h3> <p>由于Python是动态语言，任何实例在运行期都可以动态地添加属性。比如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>此时，Student类有三个属性，name、gender、score，由于是动态语言，在运行时，可以随意添加属性。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>student <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Male'</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span>
student<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">12</span> <span class="token comment"># ==&gt; 动态添加年龄age属性</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果要限制添加的属性，例如，Student类只允许添加 name、gender和score 这3个属性，就可以利用Python的一个特殊的<code>__slots__</code>来实现。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    __slots__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">,</span> <span class="token string">'score'</span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender
        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>使用<code>__slots__</code>= ('name', 'gender', 'score') 限定Student类的属性，这个时候在外部再次添加动态属性age，将会报错。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> student <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Male'</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> student<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">12</span> <span class="token comment"># ==&gt; 动态添加年龄age属性</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
AttributeError<span class="token punctuation">:</span> <span class="token string">'Student'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'age'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>__slots__</code>的目的是限制当前类所能拥有的属性，避免因为外部属性的操作导致类属性越来越难以管理。</p> <p>任务：</p> <p>假设Person类通过__<code>__slots__</code><strong>定义了name和gender，请在派生类Student中通过</strong><code>__slots__</code>__继续添加score的定义，使Student类可以实现name、gender和score 3个属性。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    __slots__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'gender'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>gender <span class="token operator">=</span> gender


<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">:</span>

    __slots__ <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'score'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>Student<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score


s <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'male'</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Tim'</span>
s<span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">99</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="_4-2-python类的-len-方法"><a href="#_4-2-python类的-len-方法" class="header-anchor">#</a> 4.2 Python类的<code>__len__</code>方法</h3> <p>对于列表List或者元组Tuple，通过内建方法len()，可以得出列表或者元组中元素的个数。如果一个类表现得像一个list，想使用len()函数来获取元素个数时，则需要实现__len__()方法。
比如我们实现一个班级Class的类，初始化把班级的同学名字列表传进去，希望len()函数可以返回班级同学的数量时，可以这样实现。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Class</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> students<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>students <span class="token operator">=</span> students
    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>students<span class="token punctuation">)</span>

students <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Alice'</span><span class="token punctuation">,</span> <span class="token string">'Bob'</span><span class="token punctuation">,</span> <span class="token string">'Candy'</span><span class="token punctuation">]</span>
class_ <span class="token operator">=</span> Class<span class="token punctuation">(</span>students<span class="token punctuation">)</span>
<span class="token builtin">len</span><span class="token punctuation">(</span>class_<span class="token punctuation">)</span> <span class="token comment"># ==&gt; 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>通过自定义__len__()方法，可以让len()函数返回相关的结果，如果没有定义__len__()方法的类使用len()函数获取长度时，将会引起异常。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Class</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> students<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>students <span class="token operator">=</span> students

class_ <span class="token operator">=</span> Class<span class="token punctuation">(</span>students<span class="token punctuation">)</span>
<span class="token builtin">len</span><span class="token punctuation">(</span>class_<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
TypeError<span class="token punctuation">:</span> <span class="token builtin">object</span> of <span class="token builtin">type</span> <span class="token string">'Class'</span> has no <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>任务</p> <p>斐波那契数列是由 0, 1, 1, 2, 3, 5, 8...构成。</p> <p>请编写一个Fib类，Fib(10)表示数列的前10个元素，print Fib(10) 可以打印出数列的前 10 个元素，len(Fib(10))可以正确返回数列的个数10。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Fib</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>num <span class="token operator">=</span> num
        a <span class="token operator">=</span> <span class="token number">0</span>
        b <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>res<span class="token punctuation">.</span>append<span class="token punctuation">(</span>a<span class="token punctuation">)</span>
            a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> b <span class="token operator">+</span> a

    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>res<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>res<span class="token punctuation">)</span>

f <span class="token operator">=</span> Fib<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_5-python类的-call-方法"><a href="#_5-python类的-call-方法" class="header-anchor">#</a> 5.Python类的<code>__call__</code>方法</h2> <p>在Python中，函数其实是一个对象，我们可以将一个函数赋值给一个变量，而不改变函数的功能。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; f = abs
&gt;&gt;&gt; f
&lt;built-in function abs&gt;
&gt;&gt;&gt; abs
&lt;built-in function abs&gt;
&gt;&gt;&gt; f.__name__
'abs'
&gt;&gt;&gt; f(-123)
123
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>把内建函数abs()赋值给变量f之后，可以看到f就和abs一样，都是。
由于 f 可以被调用，所以，f 被称为可调用对象，而事实上，所有的函数都是可调用对象。
如果把一个类实例也变成一个可调用对象，可以实现一个特殊的方法__call__()。
例如，我们把Person类变成一个可调用对象：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>class Person(object):
    def __init__(self, name, gender):
        self.name = name
        self.gender = gender

    def __call__(self, friend):
        print('My name is {}...'.format(self.name))
        print('My friend is {}...'.format(friend))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>接着我们初始化一个Person对象，并对这个对象通过函数的方式调用：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt;&gt;&gt; p = Person('Bob', 'Male')
&gt;&gt;&gt; p('Alice') # ==&gt; 用函数的方式调用Person类的实例p
My name is Bob...
My friend is Alice...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_6-python模块"><a href="#_6-python模块" class="header-anchor">#</a> 6.python模块</h2> <p>官方模块</p> <p>自定义模块</p> <p>第三方模块</p> <p>from 包 import 模块名
包在python中表现为一个文件夹，必须要有<code>__init__</code>.py</p> <blockquote><p>Python官方提供很多有用的模块，比如：os模块、sys模块、time模块、math模块等等。
导入官方模块，不需要考虑路径的问题，例如，导入系统自带的模块 math，直接导入即可。如果是导入自定义模块，则需要考虑路径问题</p></blockquote> <p>Python安装第三方模块的方法</p> <p>尽管Python的官方模块已经提供了非常强大的能力，但是仍有大量热心开发者提供了非常好用的第三方库，在实际开发中，也会经常使用，比如Web开发框架，Django、Flask，异步任务框架：Celery等。
在安装Python的时候，Python环境提供了安装第三方模块的工具：pip，通过这个工具，可以非常快捷的安装第三方模块。
安装Django模块：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>pip install django
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>卸载Django模块：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>pip uninstall django
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_7-python读写文件"><a href="#_7-python读写文件" class="header-anchor">#</a> 7.python读写文件</h2> <h3 id="_7-1-python打开文本文件"><a href="#_7-1-python打开文本文件" class="header-anchor">#</a> 7.1. Python打开文本文件</h3> <p>通过print()可以从数据输出数据，通过input()可以向程序输入数据，但这些都是标准屏幕上的操作，本节课学习文件的读写操作。
Python 提供了open()函数，可以打开一个文件，得到一个文件file对象，而file对象提供相关的方法对文件内容进行读写等操作。
open()函数有若干个参数，比较重要的是以下三个参数：</p> <ol><li>文件路径：指定需要打开的文件的文件路径</li> <li>打开模式：针对不同文件（二进制文件、文本文件）以及不同操作（读操作、写操作），会有不同的打开模式</li> <li>编码：设定打开文件的默认编码</li></ol> <p>常用的打开模式如下：</p> <table><thead><tr><th><strong>模式</strong></th> <th style="text-align:left"><strong>描述</strong></th></tr></thead> <tbody><tr><td>t</td> <td style="text-align:left">文本模式（默认）</td></tr> <tr><td>x</td> <td style="text-align:left">写模式，新建一个文件</td></tr> <tr><td>b</td> <td style="text-align:left">二进制模式，打开二进制文件</td></tr> <tr><td>+</td> <td style="text-align:left">更新一个文件（可读可写）</td></tr> <tr><td>r</td> <td style="text-align:left">以只读模式打开一个文件</td></tr> <tr><td>rb</td> <td style="text-align:left">以二进制格式只读模式打开一个文件</td></tr> <tr><td>w</td> <td style="text-align:left">打开一个文件进行写入，如果文件内容已存在，会清除原有的内容</td></tr> <tr><td>wb</td> <td style="text-align:left">以二进制格式只写模式打开一个文件，会清除原有的内容</td></tr> <tr><td>a</td> <td style="text-align:left">打开一个文件并追加内容，会往文件尾部添加内容</td></tr> <tr><td>ab</td> <td style="text-align:left">以二进制格式打开一个文件并追加内容，会往文件尾部添加内容</td></tr> <tr><td>w+</td> <td style="text-align:left">打开一个文件进行读写，如果文件内容已存在，会清除原有的内容</td></tr> <tr><td>a+</td> <td style="text-align:left">打开一个文件并使用追加进行读写</td></tr></tbody></table> <h3 id="_7-2-python读取文件内容"><a href="#_7-2-python读取文件内容" class="header-anchor">#</a> 7.2. Python读取文件内容</h3> <p>打开文件之后，就可以读取文件的内容，文件对象提供多种读取文件内容的方法。
打开test.txt文件：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token comment"># 打开test.txt文件</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 关闭文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>test.txt文件有以下内容</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>Hello World<span class="token punctuation">.</span>
Hello Python<span class="token punctuation">.</span>
Hello Imooc<span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>1.读取若干字符</p> <p>文件对象提供read()方法，可以读取文件中的若干个字符，它提供一个参数size，可以指定读取字符的数量。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>s <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment"># ==&gt; Hello</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>当read()之后，访问文件的游标就会移动到第六个字符前面，此时，继续read，将得到Hello后面的结果。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>s <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment"># ==&gt; ' World'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>2.读取一行</p> <p>文件对象提供readline()方法，和read()方法类似，可以读取文件中的若干个字符，它也提供一个参数size，可以指定读取字符的数量，不过和read()方法不同的是，readline()方法遇到一行结束的时候，就会返回。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token comment"># 重新打开文件</span>
s <span class="token operator">=</span> f<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>  <span class="token comment"># ==&gt; 'Hello World.\n'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以看到，打印的内容并没有20个字符，readline最多返回一行的所有字符。</p> <p>3.读取多行</p> <p>文件对象提供readlines()方法，可以读取多行字符，返回一个列表。它提供一个hint参数，表示指定读取的行数，没有指定则默认以列表的形式返回文件所有的字符串。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span>
s <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment"># ==&gt; ['Hello World.\n', 'Hello Python.\n', 'Hello Imooc.\n']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>任务
实现一个read.py文件，把read.py文件的内容打印出来。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'read.py'</span><span class="token punctuation">)</span>
content <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-3-python把字符串写入文件"><a href="#_7-3-python把字符串写入文件" class="header-anchor">#</a> 7.3. Python把字符串写入文件</h3> <p>要把字符串内容写入文件，需要使用w的模式打开文件。</p> <table><thead><tr><th><strong>模式</strong></th> <th style="text-align:left"><strong>描述</strong></th></tr></thead> <tbody><tr><td>w</td> <td style="text-align:left">打开一个文件进行写入，如果文件内容已存在，会清除原有的内容</td></tr> <tr><td>wb</td> <td style="text-align:left">以二进制格式只写模式打开一个文件，会清除原有的内容</td></tr> <tr><td>w+</td> <td style="text-align:left">打开一个文件进行读写，如果文件内容已存在，会清除原有的内容</td></tr></tbody></table> <div class="language-python line-numbers-mode"><pre class="language-python"><code>​f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>1.写入若干字符</p> <p>文件对象提供write方法向文件内写入若干字符，它接受一个字符串参数，表示需要写入的字符串。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Hello World\n'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.写入若干行</p> <p>文件对象提供writelines()方法向文件内容写入多行数据，它接受一个列表，表示需要写入的字符串列表。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>lines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Hello World\n'</span><span class="token punctuation">,</span> <span class="token string">'Hello Python\n'</span><span class="token punctuation">,</span> <span class="token string">'Hello Imooc\n'</span><span class="token punctuation">]</span>
f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>

f<span class="token punctuation">.</span>writelines<span class="token punctuation">(</span>lines<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_7-4-python往文件追加内容"><a href="#_7-4-python往文件追加内容" class="header-anchor">#</a> 7.4. Python往文件追加内容</h3> <p>通过w的打开方式打开文件，会清空文件的内容，这在很多场景下是不合适的，比如写系统日志的时候，需要累积随时间推移的所有数据。</p> <p>Python提供文件追加内容的打开模式，可以往文件尾部添加内容，又不清空文件原有的内容。</p> <table><thead><tr><th><strong>模式</strong></th> <th style="text-align:left"><strong>描述</strong></th></tr></thead> <tbody><tr><td>w</td> <td style="text-align:left">打开一个文件进行写入，如果文件内容已存在，会清除原有的内容</td></tr> <tr><td>wb</td> <td style="text-align:left">以二进制格式只写模式打开一个文件，会清除原有的内容</td></tr> <tr><td>w+</td> <td style="text-align:left">打开一个文件进行读写，如果文件内容已存在，会清除原有的内容</td></tr></tbody></table> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Hello Everyone\n'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用a的打开方式打开文件，文件游标默认是在文件的尾部，因此，可以便捷的往文件尾部添加内容，除此以外，文件对象还提供 <strong>seek()</strong> 方法，可以移动文件的游标位置，它接受一个参数，表示文件的位置，<strong>0：文件首部，1：当前位置，2：文件尾部</strong>，通过seek()可以把文件游标移动到文件首部但不删除文件的内容。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>​f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">)</span>
content <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># ==&gt; []</span>
f<span class="token punctuation">.</span>seek<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
content <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token comment"># ==&gt; ['Hello World\n', 'Hello Python\n', 'Hello Imooc\n']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>第一次print(content)的时候，由于文件游标在文件的尾部，所以readlines()读取不到任何数据，打印了空的结果，第二次print(content)的时候，由于通过seek(0)，文件游标移动到了文件的首部，因此readlines()就返回了文件所有的内容。</p> <p>任务
假设test.txt文件有以下内容：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>Hello World
Hello Python
Hello Imooc
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>请将文件的内容重复写一份追加到文件的尾部。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>seek<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
content <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
f<span class="token punctuation">.</span>seek<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> line <span class="token keyword">in</span> content<span class="token punctuation">:</span>
    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_7-5-python正确关闭文件"><a href="#_7-5-python正确关闭文件" class="header-anchor">#</a> 7.5. Python正确关闭文件</h3> <p>在进行文件操作的时候，正确关闭一个文件非常重要，如果在文件读写后，没有正确关闭一个文件的话，则有可能导致文件损坏，文件内容丢失等问题。</p> <p>在一般情况下，我们使用文件对象的close()方法，来关闭一个文件。
但是，使用close()方法，也不是100%安全的，如果在close()文件之前，程序异常退出了，那么文件也得不到正确的关闭。比如：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">)</span>
exit<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># ==&gt; 模拟程序异常退出</span>
f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># ==&gt; close语句永远的不到执行</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在实际工程中，close()文件之前，为了正确关闭文件，需要考虑各种异常情况，这是非常麻烦的一件事，Python提供with关键字，可以免除这类后顾之忧。
with关键字对资源进行访问的场合，会确保不管在使用过程中是否发生异常，都会执行必要的“清理”的操作，释放资源，比如文件使用后自动关闭等等。
with的使用方法如下：</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'test.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    content <span class="token operator">=</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> content<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当文件使用结束后，不需要显式的调用f.close()关闭文件。</p> <h2 id="_8-python网络编程"><a href="#_8-python网络编程" class="header-anchor">#</a> 8.python网络编程</h2> <h3 id="_8-1-python自带的http服务器"><a href="#_8-1-python自带的http服务器" class="header-anchor">#</a> 8.1. python自带的HTTP服务器</h3> <p>python提供了简易的HTTP服务器，可以直接运行起来。
在终端，输入这条命令，就可以启动一个HTTP服务器。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>python <span class="token operator">-</span>m http<span class="token punctuation">.</span>server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动成功后，会输出以下信息：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>提示HTTP服务器在本机8000端口运行，接着就可以在浏览器输入http://127.0.0.1:8000看到由这个服务器提供的网页。</p> <p>任务</p> <p>Python自带的HTTP服务器，默认的端口为8000端口，同时默认的目录是当前终端启动运行的目录，请启动Python自带的HTTP服务器，指定端口为9999，并指定目录路径为C:/。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>python <span class="token operator">-</span>m http<span class="token punctuation">.</span>server <span class="token number">9999</span> <span class="token operator">-</span>d C<span class="token punctuation">:</span><span class="token operator">/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_8-2-python的requests库"><a href="#_8-2-python的requests库" class="header-anchor">#</a> 8.2. Python的requests库</h3> <p>Python官方提供的urllib库可以满足一般情况下的HTTP操作，但是urllib这个库设计是用来处理url地址的，并不是专门处理HTTP操作的包。因此，在很多场景下，一般会使用requests库来进行HTTP请求。</p> <p>requests库是著名的Python第三方库，使用requests库，可以定制化你的HTTP请求，包括请求方法，请求参数等等。
由于requests是第三方库，因此在使用前，需要安装。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>pip install requests
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在一般的使用上，requests和urllib没有太大区别，但是在复杂的场景中，requests可以提供urllib无法提供的强大功能。因此，在使用上，建议使用requests库代替urllib库来进行HTTP请求等的操作。</p> <h2 id="_9-python函数式编程"><a href="#_9-python函数式编程" class="header-anchor">#</a> 9.python函数式编程</h2></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/" class="prev router-link-active">
          总览
        </a></span> <span class="next"><a href="/python/advance.html">
          python进阶
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.f89a45ef.js" defer></script><script src="/assets/js/14.22936df2.js" defer></script>
  </body>
</html>
